{
  "_meta": {
    "description": "Production microservices topology with realistic service mesh patterns",
    "scenario": "E-commerce platform with API gateway, domain services, and infrastructure",
    "services": 12,
    "traces": 50
  },
  "traces": [
    {
      "trace_id": "topo-0001-api-health",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/health",
      "http.status_code": 200,
      "duration_ms": 2,
      "span_count": 1,
      "error": false,
      "deployment.environment": "production",
      "k8s.pod.name": "api-gateway-7d9f8b6c4-x2k9j",
      "k8s.namespace": "commerce"
    },
    {
      "trace_id": "topo-0002-user-lookup",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/users/:id",
      "http.status_code": 200,
      "duration_ms": 45,
      "span_count": 5,
      "error": false,
      "downstream.services": ["user-service", "cache-service"],
      "user.tier": "premium",
      "cache.hit": true,
      "cache.backend": "redis-cluster"
    },
    {
      "trace_id": "topo-0003-product-catalog",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/products",
      "http.status_code": 200,
      "duration_ms": 120,
      "span_count": 8,
      "error": false,
      "downstream.services": ["product-service", "inventory-service", "pricing-service"],
      "products.returned": 25,
      "pagination.page": 1,
      "pagination.total_pages": 42
    },
    {
      "trace_id": "topo-0004-search-query",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/search",
      "http.status_code": 200,
      "duration_ms": 89,
      "span_count": 6,
      "error": false,
      "downstream.services": ["search-service", "elasticsearch"],
      "search.query": "wireless headphones",
      "search.results_count": 156,
      "search.index": "products-v3"
    },
    {
      "trace_id": "topo-0005-cart-add",
      "service.name": "api-gateway",
      "http.method": "POST",
      "http.route": "/api/v2/cart/items",
      "http.status_code": 201,
      "duration_ms": 67,
      "span_count": 7,
      "error": false,
      "downstream.services": ["cart-service", "inventory-service", "pricing-service"],
      "cart.item_count": 3,
      "cart.total_cents": 15999
    },
    {
      "trace_id": "topo-0006-checkout-init",
      "service.name": "api-gateway",
      "http.method": "POST",
      "http.route": "/api/v2/checkout",
      "http.status_code": 200,
      "duration_ms": 234,
      "span_count": 15,
      "error": false,
      "downstream.services": ["checkout-service", "cart-service", "user-service", "shipping-service", "tax-service"],
      "checkout.step": "initialize",
      "checkout.item_count": 3
    },
    {
      "trace_id": "topo-0007-payment-process",
      "service.name": "checkout-service",
      "http.method": "POST",
      "http.route": "/internal/payment/process",
      "http.status_code": 200,
      "duration_ms": 890,
      "span_count": 12,
      "error": false,
      "downstream.services": ["payment-service", "fraud-detection", "stripe-adapter"],
      "payment.provider": "stripe",
      "payment.amount_cents": 16999,
      "payment.currency": "USD",
      "payment.risk_score": 12
    },
    {
      "trace_id": "topo-0008-inventory-reserve",
      "service.name": "checkout-service",
      "http.method": "POST",
      "http.route": "/internal/inventory/reserve",
      "http.status_code": 200,
      "duration_ms": 45,
      "span_count": 4,
      "error": false,
      "downstream.services": ["inventory-service", "warehouse-service"],
      "inventory.items_reserved": 3,
      "inventory.warehouse": "us-west-2a"
    },
    {
      "trace_id": "topo-0009-notification-send",
      "service.name": "notification-service",
      "http.method": "POST",
      "http.route": "/internal/send",
      "http.status_code": 202,
      "duration_ms": 23,
      "span_count": 3,
      "error": false,
      "downstream.services": ["email-provider", "sms-provider"],
      "notification.type": "order_confirmation",
      "notification.channel": "email",
      "notification.template": "order-v3"
    },
    {
      "trace_id": "topo-0010-shipping-rate",
      "service.name": "shipping-service",
      "http.method": "POST",
      "http.route": "/internal/rates/calculate",
      "http.status_code": 200,
      "duration_ms": 156,
      "span_count": 6,
      "error": false,
      "downstream.services": ["fedex-adapter", "ups-adapter", "usps-adapter"],
      "shipping.destination_zip": "94102",
      "shipping.weight_oz": 32,
      "shipping.options_returned": 4
    },
    {
      "trace_id": "topo-0011-tax-calculate",
      "service.name": "tax-service",
      "http.method": "POST",
      "http.route": "/internal/tax/calculate",
      "http.status_code": 200,
      "duration_ms": 34,
      "span_count": 3,
      "error": false,
      "downstream.services": ["avalara-adapter"],
      "tax.jurisdiction": "CA",
      "tax.rate": 0.0875,
      "tax.amount_cents": 1487
    },
    {
      "trace_id": "topo-0012-fraud-check",
      "service.name": "fraud-detection",
      "http.method": "POST",
      "http.route": "/internal/evaluate",
      "http.status_code": 200,
      "duration_ms": 78,
      "span_count": 5,
      "error": false,
      "downstream.services": ["ml-scoring-service", "rules-engine"],
      "fraud.score": 12,
      "fraud.decision": "approve",
      "fraud.rules_evaluated": 47
    },
    {
      "trace_id": "topo-0013-recommendation",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/recommendations/:userId",
      "http.status_code": 200,
      "duration_ms": 145,
      "span_count": 7,
      "error": false,
      "downstream.services": ["recommendation-service", "ml-inference", "product-service"],
      "recommendations.count": 12,
      "recommendations.model": "collaborative-v4",
      "recommendations.latency_p99_ms": 120
    },
    {
      "trace_id": "topo-0014-order-history",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/users/:id/orders",
      "http.status_code": 200,
      "duration_ms": 89,
      "span_count": 6,
      "error": false,
      "downstream.services": ["order-service", "user-service"],
      "orders.returned": 15,
      "orders.total_available": 47
    },
    {
      "trace_id": "topo-0015-webhook-delivery",
      "service.name": "webhook-service",
      "http.method": "POST",
      "http.route": "/internal/deliver",
      "http.status_code": 200,
      "duration_ms": 234,
      "span_count": 4,
      "error": false,
      "webhook.endpoint": "https://partner.example.com/hooks",
      "webhook.event_type": "order.created",
      "webhook.attempt": 1,
      "webhook.response_time_ms": 189
    },
    {
      "trace_id": "topo-0016-analytics-ingest",
      "service.name": "analytics-service",
      "http.method": "POST",
      "http.route": "/internal/events/batch",
      "http.status_code": 202,
      "duration_ms": 12,
      "span_count": 2,
      "error": false,
      "analytics.events_count": 50,
      "analytics.batch_size_bytes": 12450
    },
    {
      "trace_id": "topo-0017-cache-warm",
      "service.name": "cache-service",
      "http.method": "POST",
      "http.route": "/internal/warm",
      "http.status_code": 200,
      "duration_ms": 456,
      "span_count": 8,
      "error": false,
      "cache.keys_warmed": 1000,
      "cache.backend": "redis-cluster",
      "cache.ttl_seconds": 3600
    },
    {
      "trace_id": "topo-0018-db-migration",
      "service.name": "migration-service",
      "http.method": "POST",
      "http.route": "/internal/migrate",
      "http.status_code": 200,
      "duration_ms": 12340,
      "span_count": 25,
      "error": false,
      "migration.version": "20240115_add_loyalty_points",
      "migration.rows_affected": 150000,
      "migration.duration_seconds": 12
    },
    {
      "trace_id": "topo-0019-auth-token",
      "service.name": "auth-service",
      "http.method": "POST",
      "http.route": "/oauth/token",
      "http.status_code": 200,
      "duration_ms": 34,
      "span_count": 4,
      "error": false,
      "auth.grant_type": "refresh_token",
      "auth.client_id": "mobile-app-ios",
      "auth.scopes": "read write"
    },
    {
      "trace_id": "topo-0020-rate-limit-check",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/products",
      "http.status_code": 200,
      "duration_ms": 2,
      "span_count": 2,
      "error": false,
      "rate_limit.bucket": "api-read",
      "rate_limit.remaining": 4500,
      "rate_limit.limit": 5000,
      "rate_limit.window_seconds": 60
    },
    {
      "trace_id": "topo-0021-graphql-query",
      "service.name": "api-gateway",
      "http.method": "POST",
      "http.route": "/graphql",
      "http.status_code": 200,
      "duration_ms": 234,
      "span_count": 18,
      "error": false,
      "graphql.operation_name": "GetProductWithReviews",
      "graphql.operation_type": "query",
      "graphql.complexity": 45,
      "downstream.services": ["product-service", "review-service", "user-service"]
    },
    {
      "trace_id": "topo-0022-grpc-internal",
      "service.name": "product-service",
      "rpc.system": "grpc",
      "rpc.method": "GetProductBatch",
      "rpc.grpc.status_code": 0,
      "http.status_code": 200,
      "duration_ms": 23,
      "span_count": 3,
      "error": false,
      "grpc.request_count": 25,
      "grpc.response_size_bytes": 45000
    },
    {
      "trace_id": "topo-0023-cdn-origin",
      "service.name": "cdn-origin",
      "http.method": "GET",
      "http.route": "/assets/images/:id",
      "http.status_code": 200,
      "duration_ms": 12,
      "span_count": 2,
      "error": false,
      "cdn.cache_status": "MISS",
      "cdn.edge_location": "SFO",
      "content.size_bytes": 245000,
      "content.type": "image/webp"
    },
    {
      "trace_id": "topo-0024-scheduled-job",
      "service.name": "scheduler-service",
      "job.name": "daily-inventory-sync",
      "http.status_code": 200,
      "duration_ms": 45000,
      "span_count": 150,
      "error": false,
      "job.type": "scheduled",
      "job.cron": "0 2 * * *",
      "job.items_processed": 50000
    },
    {
      "trace_id": "topo-0025-pubsub-publish",
      "service.name": "order-service",
      "messaging.system": "kafka",
      "messaging.destination": "orders.created",
      "http.status_code": 200,
      "duration_ms": 8,
      "span_count": 2,
      "error": false,
      "messaging.kafka.partition": 3,
      "messaging.kafka.offset": 1234567,
      "messaging.message_payload_size_bytes": 2340
    },
    {
      "trace_id": "topo-0026-pubsub-consume",
      "service.name": "fulfillment-service",
      "messaging.system": "kafka",
      "messaging.destination": "orders.created",
      "messaging.operation": "receive",
      "http.status_code": 200,
      "duration_ms": 456,
      "span_count": 8,
      "error": false,
      "messaging.kafka.consumer_group": "fulfillment-workers",
      "messaging.batch_size": 10
    },
    {
      "trace_id": "topo-0027-feature-flag",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/checkout",
      "http.status_code": 200,
      "duration_ms": 234,
      "span_count": 15,
      "error": false,
      "feature_flag.new_checkout_flow": true,
      "feature_flag.evaluation_context": "user_segment:beta",
      "experiment.variant": "treatment_a"
    },
    {
      "trace_id": "topo-0028-service-mesh",
      "service.name": "product-service",
      "http.method": "GET",
      "http.route": "/internal/products/:id",
      "http.status_code": 200,
      "duration_ms": 34,
      "span_count": 4,
      "error": false,
      "mesh.proxy": "envoy",
      "mesh.upstream_cluster": "product-service",
      "mesh.retry_count": 0,
      "mesh.circuit_breaker": "closed"
    },
    {
      "trace_id": "topo-0029-db-read",
      "service.name": "user-service",
      "db.system": "postgresql",
      "db.operation": "SELECT",
      "db.name": "users",
      "http.status_code": 200,
      "duration_ms": 5,
      "span_count": 2,
      "error": false,
      "db.statement": "SELECT * FROM users WHERE id = $1",
      "db.rows_affected": 1,
      "db.connection_pool.active": 12,
      "db.connection_pool.idle": 8
    },
    {
      "trace_id": "topo-0030-db-write",
      "service.name": "order-service",
      "db.system": "postgresql",
      "db.operation": "INSERT",
      "db.name": "orders",
      "http.status_code": 200,
      "duration_ms": 12,
      "span_count": 3,
      "error": false,
      "db.statement": "INSERT INTO orders (...) VALUES (...)",
      "db.rows_affected": 1,
      "db.transaction": true
    },
    {
      "trace_id": "topo-0031-redis-get",
      "service.name": "cache-service",
      "db.system": "redis",
      "db.operation": "GET",
      "http.status_code": 200,
      "duration_ms": 1,
      "span_count": 1,
      "error": false,
      "cache.hit": true,
      "cache.key_pattern": "user:*:profile"
    },
    {
      "trace_id": "topo-0032-redis-set",
      "service.name": "cache-service",
      "db.system": "redis",
      "db.operation": "SETEX",
      "http.status_code": 200,
      "duration_ms": 2,
      "span_count": 1,
      "error": false,
      "cache.ttl_seconds": 300,
      "cache.value_size_bytes": 1234
    },
    {
      "trace_id": "topo-0033-s3-upload",
      "service.name": "media-service",
      "rpc.system": "aws-api",
      "rpc.service": "S3",
      "rpc.method": "PutObject",
      "http.status_code": 200,
      "duration_ms": 345,
      "span_count": 3,
      "error": false,
      "aws.s3.bucket": "media-uploads-prod",
      "aws.s3.key": "images/products/12345.jpg",
      "aws.region": "us-west-2"
    },
    {
      "trace_id": "topo-0034-sqs-send",
      "service.name": "notification-service",
      "messaging.system": "aws_sqs",
      "messaging.destination": "email-queue",
      "http.status_code": 200,
      "duration_ms": 45,
      "span_count": 2,
      "error": false,
      "aws.sqs.queue_url": "https://sqs.us-west-2.amazonaws.com/123456789/email-queue",
      "aws.region": "us-west-2"
    },
    {
      "trace_id": "topo-0035-lambda-invoke",
      "service.name": "image-processor",
      "faas.invoked_name": "resize-image",
      "faas.invoked_provider": "aws",
      "http.status_code": 200,
      "duration_ms": 890,
      "span_count": 4,
      "error": false,
      "faas.cold_start": false,
      "faas.execution.billed_ms": 900,
      "faas.execution.memory_mb": 512
    },
    {
      "trace_id": "topo-0036-external-api",
      "service.name": "shipping-service",
      "http.method": "POST",
      "http.url": "https://api.fedex.com/rate/v1/rates/quotes",
      "http.status_code": 200,
      "duration_ms": 456,
      "span_count": 3,
      "error": false,
      "http.request.body_size_bytes": 1234,
      "http.response.body_size_bytes": 5678,
      "peer.service": "fedex-api"
    },
    {
      "trace_id": "topo-0037-batch-job",
      "service.name": "report-generator",
      "job.name": "daily-sales-report",
      "http.status_code": 200,
      "duration_ms": 123000,
      "span_count": 500,
      "error": false,
      "job.records_processed": 1000000,
      "job.output_size_bytes": 45000000,
      "job.partitions": 16
    },
    {
      "trace_id": "topo-0038-health-deep",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/health/deep",
      "http.status_code": 200,
      "duration_ms": 234,
      "span_count": 12,
      "error": false,
      "health.checks_passed": 12,
      "health.checks_total": 12,
      "downstream.services": ["user-service", "order-service", "product-service", "cache-service", "db-primary"]
    },
    {
      "trace_id": "topo-0039-cors-preflight",
      "service.name": "api-gateway",
      "http.method": "OPTIONS",
      "http.route": "/api/v2/orders",
      "http.status_code": 204,
      "duration_ms": 1,
      "span_count": 1,
      "error": false,
      "cors.origin": "https://app.example.com",
      "cors.allowed": true
    },
    {
      "trace_id": "topo-0040-websocket",
      "service.name": "realtime-service",
      "http.method": "GET",
      "http.route": "/ws/notifications",
      "http.status_code": 101,
      "duration_ms": 5,
      "span_count": 2,
      "error": false,
      "websocket.upgrade": true,
      "websocket.protocol": "notifications-v1"
    },
    {
      "trace_id": "topo-0041-sse-stream",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/events/stream",
      "http.status_code": 200,
      "duration_ms": 30000,
      "span_count": 3,
      "error": false,
      "sse.events_sent": 45,
      "sse.connection_duration_seconds": 30
    },
    {
      "trace_id": "topo-0042-file-upload",
      "service.name": "api-gateway",
      "http.method": "POST",
      "http.route": "/api/v2/uploads",
      "http.status_code": 201,
      "duration_ms": 2340,
      "span_count": 8,
      "error": false,
      "upload.size_bytes": 5000000,
      "upload.content_type": "image/jpeg",
      "upload.chunks": 5
    },
    {
      "trace_id": "topo-0043-pagination",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/products",
      "http.status_code": 200,
      "duration_ms": 89,
      "span_count": 5,
      "error": false,
      "pagination.cursor": "eyJpZCI6MTAwfQ==",
      "pagination.limit": 25,
      "pagination.has_next": true,
      "pagination.total_count": 15000
    },
    {
      "trace_id": "topo-0044-bulk-create",
      "service.name": "api-gateway",
      "http.method": "POST",
      "http.route": "/api/v2/products/bulk",
      "http.status_code": 207,
      "duration_ms": 5670,
      "span_count": 45,
      "error": false,
      "bulk.items_submitted": 100,
      "bulk.items_succeeded": 98,
      "bulk.items_failed": 2
    },
    {
      "trace_id": "topo-0045-idempotent",
      "service.name": "api-gateway",
      "http.method": "POST",
      "http.route": "/api/v2/orders",
      "http.status_code": 200,
      "duration_ms": 12,
      "span_count": 3,
      "error": false,
      "idempotency.key": "order-12345-retry",
      "idempotency.cached": true,
      "idempotency.original_status": 201
    },
    {
      "trace_id": "topo-0046-circuit-open",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/recommendations/:userId",
      "http.status_code": 503,
      "duration_ms": 5,
      "span_count": 2,
      "error": true,
      "error.message": "Circuit breaker open for recommendation-service",
      "circuit_breaker.state": "open",
      "circuit_breaker.failures": 15,
      "circuit_breaker.threshold": 10
    },
    {
      "trace_id": "topo-0047-fallback",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/products/:id",
      "http.status_code": 200,
      "duration_ms": 234,
      "span_count": 6,
      "error": false,
      "fallback.triggered": true,
      "fallback.reason": "primary_timeout",
      "fallback.source": "cache"
    },
    {
      "trace_id": "topo-0048-retry-success",
      "service.name": "payment-service",
      "http.method": "POST",
      "http.route": "/internal/charge",
      "http.status_code": 200,
      "duration_ms": 1890,
      "span_count": 8,
      "error": false,
      "retry.attempts": 3,
      "retry.final_attempt": true,
      "retry.backoff_ms": 500
    },
    {
      "trace_id": "topo-0049-tracing-sampled",
      "service.name": "api-gateway",
      "http.method": "GET",
      "http.route": "/api/v2/users/:id",
      "http.status_code": 200,
      "duration_ms": 45,
      "span_count": 5,
      "error": false,
      "sampling.decision": "keep",
      "sampling.rule": "keep-premium-users",
      "sampling.priority": 1
    },
    {
      "trace_id": "topo-0050-complete-checkout",
      "service.name": "api-gateway",
      "http.method": "POST",
      "http.route": "/api/v2/checkout/complete",
      "http.status_code": 201,
      "duration_ms": 2340,
      "span_count": 45,
      "error": false,
      "downstream.services": ["checkout-service", "payment-service", "inventory-service", "order-service", "notification-service", "analytics-service"],
      "checkout.order_id": "ord_abc123",
      "checkout.total_cents": 16999,
      "checkout.payment_method": "card",
      "checkout.items": 3
    }
  ]
}
